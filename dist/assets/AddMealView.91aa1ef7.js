import{y as A,z as B,B as C,_ as F,A as x,C as M,r as f,a as v,o as l,b as n,f as o,g as _,h as p,D as u,i,d as g,e as T,j as I,n as S,k as D,F as U,p as V,m as w}from"./index.44beef2b.js";import{L}from"./LoadingModal.5f0310a5.js";async function z(r){const e=A(B,"meals");await C(e,r)}const j={name:"AddMealToBaseForm",components:{LoadingModal:L,AppButton:x},setup(){const r=M({name:"",kcal:0,protein:0,fat:0,carbohydrates:0}),e=M({name:!1,kcal:!1,protein:!1,fat:!1,carbohydrates:!1}),y=f(0),a=f("Wait"),c=f(!1),m=f(!1),d=f(!0),t=M({name:"",kcal:0,protein:0,fat:0,carbohydrates:0});async function s(){if(!t.name.match(/^[A-Za-z]+$/)){e.name=!0;return}if(e.name=!1,t.kcal<=0&&t.kcal<1e3&&t.kcal.match(/^-?\d*\.?\d*$/)){e.kcal=!0;return}if(e.kcal=!1,parseFloat(t.protein)>200){e.protein=!0;return}if(e.protein=!1,parseFloat(t.fat)>200){e.fat=!0;return}if(e.fat=!1,parseFloat(t.carbohydrates)>600){e.carbohydrates=!0;return}e.carbohydrates=!1;const h={name:t.name,kcal:parseFloat(t.kcal),protein:parseFloat(t.protein),fat:parseFloat(t.fat),carbohydrates:parseFloat(t.carbohydrates),id:Math.floor(Math.random()*200)};await k(h)}async function k(h){m.value=!0,c.value=!0,await z(h),await Object.assign(t,r),a.value="Meal added :)",d.value=!1,m.value=!1}function N(){c.value=!1}return{form:t,addMeal:k,closeModal:N,message:a,showModal:c,regInSubmission:m,passData:d,addMealValidationForm:e,verification:s,n:y}}},b=r=>(V("data-v-e3930c31"),r=r(),w(),r),P={class:"form__name"},E=b(()=>o("label",{class:"family-Nerko"},"Name",-1)),O={key:0,class:"error"},W={class:"form__kcal"},Z=b(()=>o("label",{class:"family-Nerko"},"Calory",-1)),q={key:0,class:"error"},G={class:"form__protein"},H=b(()=>o("label",{class:"family-Nerko"},"Protein",-1)),J={key:0,class:"error"},K={class:"form__fat"},Q=b(()=>o("label",{class:"family-Nerko"},"Fat",-1)),R={key:0,class:"error"},X={class:"form__carbohydrates"},Y=b(()=>o("label",{class:"family-Nerko"},"Carbohydrates",-1)),$={key:0,class:"error"},aa={class:"form__button"};function ea(r,e,y,a,c,m){const d=v("AppButton"),t=v("LoadingModal");return l(),n(U,null,[o("form",{class:"form",onSubmit:e[5]||(e[5]=S((...s)=>a.verification&&a.verification(...s),["prevent"]))},[o("div",P,[E,_(o("input",{"data-name":"",type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>a.form.name=s),style:u({borderColor:a.addMealValidationForm.name?"tomato":"rgb(115, 184, 152) "})},null,4),[[p,a.form.name]]),a.addMealValidationForm.name?(l(),n("p",O,"Name can't be empty")):i("",!0)]),o("div",W,[Z,_(o("input",{"data-calory":"",type:"number",min:"0",inputmode:"numeric",pattern:"[0-9]*",title:"Non-negative integral number","onUpdate:modelValue":e[1]||(e[1]=s=>a.form.kcal=s),style:u({borderColor:a.addMealValidationForm.kcal?"tomato":"rgb(115, 184, 152) "})},null,4),[[p,a.form.kcal]]),a.addMealValidationForm.kcal?(l(),n("p",q," Calorie must be on 1 to 1000 ")):i("",!0)]),o("div",G,[H,_(o("input",{"data-protein":"",type:"number",min:"0",inputmode:"numeric",pattern:"[0-9]*",title:"Non-negative integral number","onUpdate:modelValue":e[2]||(e[2]=s=>a.form.protein=s),style:u({borderColor:a.addMealValidationForm.protein?"tomato":"rgb(115, 184, 152)"})},null,4),[[p,a.form.protein]]),a.addMealValidationForm.protein?(l(),n("p",J," Protein must be below 200 ")):i("",!0)]),o("div",K,[Q,_(o("input",{"data-fat":"",type:"number",min:"0",inputmode:"numeric",pattern:"[0-9]*",title:"Non-negative integral number","onUpdate:modelValue":e[3]||(e[3]=s=>a.form.fat=s),style:u({borderColor:a.addMealValidationForm.fat?"tomato":"rgb(115, 184, 152) "})},null,4),[[p,a.form.fat]]),a.addMealValidationForm.fat?(l(),n("p",R," Fat must be below 200 ")):i("",!0)]),o("div",X,[Y,_(o("input",{"data-carbohydrates":"",type:"number",min:"0",inputmode:"numeric",pattern:"[0-9]*",title:"Non-negative integral number","onUpdate:modelValue":e[4]||(e[4]=s=>a.form.carbohydrates=s),style:u({borderColor:a.addMealValidationForm.carbohydrates?"tomato":"rgb(115, 184, 152)"})},null,4),[[p,a.form.carbohydrates]]),a.addMealValidationForm.carbohydrates?(l(),n("p",$," Carbohydrates must be below 600 ")):i("",!0)]),o("div",aa,[g(d,null,{default:T(()=>[I("Add meal")]),_:1})])],32),a.showModal?(l(),D(t,{key:0,message:a.message,passData:a.passData,showModal:a.showModal,closeModal:a.closeModal},null,8,["message","passData","showModal","closeModal"])):i("",!0)],64)}const oa=F(j,[["render",ea],["__scopeId","data-v-e3930c31"]]);const ta={name:"AddMealView",components:{AddMealToBaseForm:oa}},ra=r=>(V("data-v-c53060ff"),r=r(),w(),r),sa={class:"add-meal"},la=ra(()=>o("header",{class:"add-meal__header"},[o("h2",{class:"add-meal__header-title family-Nerko"},"Add meal"),o("span",{class:"add-meal__header-info"}," * add food per 100g")],-1));function na(r,e,y,a,c,m){const d=v("AddMealToBaseForm");return l(),n("div",sa,[la,g(d)])}const ca=F(ta,[["render",na],["__scopeId","data-v-c53060ff"]]);export{ca as default};
